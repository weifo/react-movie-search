{"version":3,"sources":["images/tmdb.svg","components/card.js","components/search.js","components/app-main.js","index.js"],"names":["module","exports","__webpack_require__","p","backdropIMG","SearchBox","state","suggests","visible","value","onChange","_callee","e","search","infos","url","call","regenerator_default","a","wrap","_context","prev","next","target","length","concat","fetch","sent","json","results","forEach","result","push","title","id","_this","setState","stop","this","event","select","textContent","_this2","_react_16_7_0_react_default","createElement","className","href","onclick","src","logo","alt","ref","onClick","handleChange","type","placeholder","onInput","handleInputChange","bind","style","opacity","toggle","map","suggest","key","popularity","props","fetchMovieID","Component","numeral","require","Card","data","posterIMG","poster","production","productionCountries","production_countries","genres","genre","totalRevenue","revenue","productionList","nestedDataToString","genresList","backdrop","vote","format","original_title","tagline","overview","release","runtime","document","body","backgroundImage","nestedData","nestedArray","undefined","item","name","join","App","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","movieID","search_SearchBox","card_Card","then","res","homepage","poster_path","production_companies","release_date","vote_average","backdrop_path","console","log","fetchApi","window","React","ReactDOM","render","app_main_App","getElementById"],"mappings":"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","file":"static/js/main.7ff8e28c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/tmdb.27b65cb4.svg\";","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nlet numeral = require('numeral');\r\nlet backdropIMG;\r\n\r\nexport default class Card extends Component {\r\n\r\n  render() {\r\n    let data = this.props.data\r\n       // if movie ID found, then...\r\n\r\n\r\n\r\n      let posterIMG = 'https://image.tmdb.org/t/p/w500' + data.poster,\r\n          production = data.production,\r\n          productionCountries = data.production_countries,\r\n          genres = data.genre,\r\n          totalRevenue = data.revenue,\r\n          productionList = nestedDataToString(production),\r\n          productionCountriesList = nestedDataToString(productionCountries),\r\n          noData = '-',\r\n          genresList = nestedDataToString(genres);\r\n          backdropIMG = 'https://image.tmdb.org/t/p/original' + data.backdrop;\r\n\r\n\r\n\r\n      // conditional statements for no data\r\n       if (data.vote === 'undefined' || data.vote === 0) {\r\n          data.vote = noData\r\n        } else {\r\n          data.vote = data.vote + ' / 10'\r\n        };\r\n\r\n      if (totalRevenue === 'undefined' || totalRevenue === 0) {\r\n           totalRevenue = noData\r\n         } else {\r\n           totalRevenue = numeral(data.revenue).format('($0,0)');\r\n         };\r\n\r\n      if(data.poster== null){\r\n        posterIMG = 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSols5HZxlQWyS9JY5d3_L9imbk0LiziHiyDtMZLHt_UNzoYUXs2g';\r\n      }\r\n\r\n\r\n\r\n      return (\r\n        <div className=\"col-xs-12 cardcont nopadding\">\r\n\r\n          <div className=\"meta-data-container col-xs-12 col-md-8 push-md-4 col-lg-7 push-lg-5\">\r\n            <h1>{data.original_title}</h1>\r\n\r\n            <span className=\"tagline\">{data.tagline}</span>\r\n            <p>{data.overview}</p>\r\n            <div className=\"additional-details\">\r\n              <span className=\"genre-list\">{genresList}</span>\r\n              <span className=\"production-list\">{productionList}</span>\r\n              <div className=\"row nopadding release-details\">\r\n                <div className=\"col-xs-6\"> Original Release: <span className=\"meta-data\">{data.release}</span></div>\r\n                <div className=\"col-xs-6\"> Running Time: <span className=\"meta-data\">{data.runtime} mins</span> </div>\r\n                <div className=\"col-xs-6\"> Box Office: <span className=\"meta-data\">{totalRevenue}</span></div>\r\n                <div className=\"col-xs-6\"> Vote Average: <span className=\"meta-data\">{data.vote}</span></div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"poster-container nopadding col-xs-12 col-md-4 pull-md-8 col-lg-5 pull-lg-7 \">\r\n            <img id=\"postertest\" className='poster' src={posterIMG}/>\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n  componentDidUpdate() {\r\n    document.body.style.backgroundImage = 'url(' + backdropIMG + ')';\r\n  }\r\n}\r\n\r\n\r\nfunction nestedDataToString(nestedData) {\r\n  let nestedArray = [],\r\n      resultString;\r\n  if(nestedData !== undefined){\r\n    nestedData.forEach(function(item){\r\n      nestedArray.push(item.name);\r\n    });\r\n  }\r\n  resultString = nestedArray.join(', '); // array to string\r\n  return resultString;\r\n}\r\n\r\n","import React, { Component } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport logo from \"../images/tmdb.svg\";\r\n\r\nexport default class SearchBox extends Component {\r\n  state={\r\n    suggests:[],\r\n    visible:0,\r\n    value:''\r\n  }\r\n  onChange=async (e)=>{\r\n    let search=e.target.value,\r\n        infos=[];\r\n    if(search.length>=2){\r\n      let url=`https://api.themoviedb.org/3/search/movie?query=${search}&api_key=cfe422613b250f702980a3bbf9e90716`;\r\n      let call=await fetch(url);\r\n      let data=await call.json();\r\n      data.results.forEach(result=>{\r\n            infos.push(\r\n          {title:result.title,\r\n           id:result.id});\r\n      });\r\n      this.setState({\r\n        suggests:[...infos],\r\n        visible:1\r\n      });\r\n      //e.target.nextSibling.classList.toggle(\"search-suggest-tooggle\")\r\n    }\r\n  }\r\n\r\n  handleInputChange(event) {\r\n    this.setState({value: event.target.value});\r\n  }\r\n  handleChange(event) {\r\n    event.target.select();\r\n  }\r\n  toggle(e){\r\n     this.setState({\r\n       visible:0,\r\n       value:e.target.textContent\r\n     })\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"col-xs-12 search-container nopadding\">\r\n        <div className=\"row\">\r\n          <div className=\"col-xs-12 col-sm-6 col-lg-5\">\r\n            <a\r\n              href=\"baidu.com\"\r\n              title=\"ReactJS TMDb Movie Search\"\r\n              onclick=\"ga('send', 'event', 'link', 'internal', 'TMDB logo')\"\r\n            >\r\n              <img src={logo} className=\"logo\" alt=\"The Movie Database\" />\r\n            </a>\r\n          </div>\r\n          <div className=\"col-xs-12 col-sm-6 col-lg-7\">\r\n            <form className=\"searchbox\" >\r\n              {/*  <label> */}\r\n              <input\r\n                ref=\"search suggestion\"\r\n                onClick={this.handleChange}\r\n                className=\"searchbox__input form-control\"\r\n                type=\"text\"\r\n                placeholder=\"Search Movie Title...\"\r\n                id=\"q\"\r\n                onInput={this.onChange}\r\n                onChange={this.handleInputChange.bind(this)}\r\n                value={this.state.value}\r\n              />\r\n              <div style={{opacity:this.state.visible}} onClick={this.toggle.bind(this)}>\r\n              <ul className=\"search-suggest\">\r\n               {this.state.suggests&&this.state.suggests.map((suggest)=>\r\n                <li key={suggest.popularity} className=\"search-result\" \r\n                onClick={this.props.fetchMovieID} id={suggest.id}>{suggest.title}</li>\r\n            )}\r\n           </ul>\r\n           </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n","import React, { Component } from 'react';\r\nimport SearchBox from './search';\r\nimport Card from './card';\r\n\r\n\r\n\r\nexport default class App extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      movieID: 157336 // set initital load movie - Interstellar\r\n    }\r\n  }\r\n  //add methods\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <SearchBox fetchMovieID={this.fetchMovieID.bind(this)}  />\r\n        <Card data={this.state} />\r\n      </div>\r\n    )\r\n  }  // END render\r\n\r\n  // the api request function\r\n  fetchApi(url) {\r\n\r\n    fetch(url).then((res) => res.json()).then((data) => {\r\n      // update state with API data\r\n      this.setState({\r\n        movieID: data.id,\r\n        original_title: data.original_title,\r\n        tagline: data.tagline,\r\n        overview: data.overview,\r\n        homepage: data.homepage,\r\n        poster: data.poster_path,\r\n        production: data.production_companies,\r\n        production_countries: data.production_countries,\r\n        genre: data.genres,\r\n        release: data.release_date,\r\n        vote: data.vote_average,\r\n        runtime: data.runtime,\r\n        revenue: data.revenue,\r\n        backdrop: data.backdrop_path\r\n\r\n      })\r\n    })\r\n\r\n    // .catch((err) => console.log('Movie not found!'))\r\n\r\n  } // end function\r\n\r\n  fetchMovieID(e) {\r\n    let movieID=e.target.id||null;\r\n    console.log(movieID);\r\n    let url = `https://api.themoviedb.org/3/movie/${movieID}?&api_key=cfe422613b250f702980a3bbf9e90716&&language=zh`\r\n    this.fetchApi(url);\r\n    //[...e.target.parentNode.childNodes].forEach(e=>e.remove());\r\n   // e.target.parentNode.classList.toggle(\"search-suggest-tooggle\");\r\n  } // end function\r\n\r\n  componentDidMount() {\r\n    let url = `https://api.themoviedb.org/3/movie/${this.state.movieID}?&api_key=cfe422613b250f702980a3bbf9e90716&&language=zh`\r\n    this.fetchApi(url)\r\n  \r\n  } // end component did mount function\r\n\r\n  // } // END CLASS - APP\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/app-main';\r\n//import 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nimport \"./styles/main.css\";\r\n\r\n//import 'whatwg-fetch';\r\n//require('es6-promise').polyfill();\r\n//import register from './serviceWorker';\r\n\r\n\r\nwindow.React = React;\r\n\r\nReactDOM.render( <App /> , document.getElementById('app'));\r\n//register();\r\n"],"sourceRoot":""}